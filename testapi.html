<!--<!DOCTYPE html> 
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Users Data</title>
    <style>
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            border: 1px solid #ccc;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
        #updateForm {
            display: none;
        }
    </style>
</head>
<body>
    <h1>Users Data</h1>
    
    <h2>Voeg een nieuwe gebruiker toe</h2>
    <form id="addUserForm">
        <input type="text" id="name" placeholder="Naam" required>
        <input type="email" id="email" placeholder="Email" required>
        <button type="submit">Voeg gebruiker toe</button>
    </form>

    <h2>Gebruikerslijst</h2>
    <table id="usersTable">
        <thead>
            <tr>
                <th>ID</th>
                <th>Naam</th>
                <th>Email</th>
                <th>Acties</th>
            </tr>
        </thead>
        <tbody>
    
        </tbody>
    </table>

    <div id="updateForm">
        <h2>Update gebruiker</h2>
        <input type="hidden" id="updateId">
        <input type="text" id="updateName" placeholder="Naam" required>
        <input type="email" id="updateEmail" placeholder="Email" required>
        <button id="updateUserButton">Bijwerken</button>
    </div>

    <script>
        // Functie om gegevens op te halen van de server
        async function fetchUsers() {
            try {
                const response = await fetch('https://nessimelmazghari-odisee.be/testAPI.php');
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                const data = await response.json();
                displayUsers(data);
            } catch (error) {
                console.error('Er is een probleem opgetreden bij het ophalen van de gegevens:', error);
            }
        }

        // Functie om gebruikersgegevens weer te geven in de tabel
        function displayUsers(users) {
            const tableBody = document.querySelector('#usersTable tbody');
            tableBody.innerHTML = ''; // Maak de tabel leeg voordat je nieuwe gegevens toevoegt
            users.forEach(user => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${user.id}</td>
                    <td>${user.name}</td>
                    <td>${user.email}</td>
                    <td>
                        <button onclick="showUpdateForm(${user.id}, '${user.name}', '${user.email}')">Bijwerken</button>
                        <button onclick="deleteUser(${user.id})">Verwijderen</button>
                    </td>
                `;
                tableBody.appendChild(row);
            });
        }

        // Functie om een gebruiker toe te voegen
        document.getElementById('addUserForm').addEventListener('submit', async (e) => {
            e.preventDefault(); // Voorkom standaard formulier indienen

            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;

            try {
                const response = await fetch('https://nessimelmazghari-odisee.be/testAPI.php', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ name, email })
                });

                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }

                fetchUsers(); // Herlaad de gebruikerslijst
                document.getElementById('addUserForm').reset(); // Reset formulier
            } catch (error) {
                console.error('Er is een probleem opgetreden bij het toevoegen van de gebruiker:', error);
            }
        });

        // Functie om een gebruiker te verwijderen
        async function deleteUser(id) {
            try {
                const response = await fetch(`https://nessimelmazghari-odisee.be/testAPI.php?id=${id}`, {
                    method: 'DELETE'
                });

                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }

                fetchUsers(); // Herlaad de gebruikerslijst
            } catch (error) {
                console.error('Er is een probleem opgetreden bij het verwijderen van de gebruiker:', error);
            }
        }

        // Functie om het update formulier weer te geven
        function showUpdateForm(id, name, email) {
            document.getElementById('updateId').value = id;
            document.getElementById('updateName').value = name;
            document.getElementById('updateEmail').value = email;
            document.getElementById('updateForm').style.display = 'block';
        }

        // Functie om een gebruiker bij te werken
        document.getElementById('updateUserButton').addEventListener('click', async () => {
            const id = document.getElementById('updateId').value;
            const name = document.getElementById('updateName').value;
            const email = document.getElementById('updateEmail').value;

            try {
                const response = await fetch('https://nessimelmazghari-odisee.be/testAPI.php', {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ id, name, email })
                });

                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }

                fetchUsers(); // Herlaad de gebruikerslijst
                document.getElementById('updateForm').style.display = 'none'; // Verberg formulier
            } catch (error) {
                console.error('Er is een probleem opgetreden bij het bijwerken van de gebruiker:', error);
            }
        });

        // Haal de gebruikersgegevens op bij het laden van de pagina
        window.onload = fetchUsers;
    </script> -->
</body>
</html>
